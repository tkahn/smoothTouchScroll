(function(e,t,n,r){e.widget("thomaskahn.smoothTouchScroll",{options:{scrollableAreaClass:"scrollableArea",scrollWrapperClass:"scrollWrapper",continuousScrolling:false,startAtElementId:"",enableLinks:false},_create:function(){var n=this,r=this.options,i=this.element;i.data("scrollWrapper",i.find("."+r.scrollWrapperClass));i.data("scrollableArea",i.find("."+r.scrollableAreaClass));if(i.data("scrollableArea").length===0&&i.data("scrollWrapper").length===0){i.wrapInner("<div class='"+r.scrollableAreaClass+"'>").wrapInner("<div class='"+r.scrollWrapperClass+"'>");i.data("scrollWrapper",i.find("."+r.scrollWrapperClass));i.data("scrollableArea",i.find("."+r.scrollableAreaClass))}else if(i.data("scrollWrapper").length===0){i.wrapInner("<div class='"+r.scrollWrapperClass+"'>");i.data("scrollWrapper",i.find("."+r.scrollWrapperClass))}else if(i.data("scrollableArea").length===0){i.data("scrollWrapper").wrapInner("<div class='"+r.scrollableAreaClass+"'>");i.data("scrollableArea",i.find("."+r.scrollableAreaClass))}i.data("scrollXPos",0);i.data("scrollableAreaWidth",0);i.data("startingPosition",0);i.data("rightScrollingInterval",null);i.data("leftScrollingInterval",null);i.data("previousScrollLeft",0);i.data("getNextElementWidth",true);i.data("swapAt",null);i.data("startAtElementHasNotPassed",true);i.data("swappedElement",null);i.data("originalElements",i.data("scrollableArea").children());i.data("visible",true);i.data("enabled",true);i.data("scrollableAreaHeight",i.data("scrollableArea").height());if(i.data("enabled")){i.data("scrollWrapper").kinetic({cursor:"move",decelerate:true,triggerHardware:false,y:false,x:true,axisTolerance:7,slowdown:.9,maxvelocity:120,throttleFPS:60,moved:function(e){if(r.continuousScrolling){if(i.data("scrollWrapper").scrollLeft()<=0){n._checkContinuousSwapLeft()}else{n._checkContinuousSwapRight()}}n._trigger("touchMoved")},stopped:function(e){n._trigger("touchStopped")},filterTarget:function(e,t){if(r.enableLinks&&!/down|start/.test(t.type)){return!/a|img/i.test(e.tagName)}}})}e(t).bind("resize",function(){n._trigger("windowResized")})},_init:function(){var e=this,t=this.element;e.recalculateScrollableArea();e._trigger("initializationComplete")},recalculateScrollableArea:function(){var t=0,n=false,r=this.options,i=this.element,s=i.data("scrollableArea").children();if(s.length){i.data("scrollableArea").children().each(function(){if(r.startAtElementId.length>0&&e(this).attr("id")===r.startAtElementId){i.data("startingPosition",t);n=true}t=t+e(this).outerWidth(true)})}else{t+=i.data("scrollableArea").outerWidth(true)}if(!n){i.data("startAtElementId","")}i.data("scrollableAreaWidth",t);i.data("scrollableArea").width(i.data("scrollableAreaWidth"));i.data("scrollWrapper").scrollLeft(i.data("startingPosition"));i.data("scrollXPos",i.data("startingPosition"))},_checkContinuousSwapRight:function(){var t=this.element,n=this.options;if(t.data("getNextElementWidth")){if(n.startAtElementId.length>0&&t.data("startAtElementHasNotPassed")){t.data("swapAt",e("#"+n.startAtElementId).outerWidth(true));t.data("startAtElementHasNotPassed",false)}else{t.data("swapAt",t.data("scrollableArea").children(":first").outerWidth(true))}t.data("getNextElementWidth",false)}if(t.data("swapAt")<=t.data("scrollWrapper").scrollLeft()){t.data("swappedElement",t.data("scrollableArea").children(":first").detach());t.data("scrollableArea").append(t.data("swappedElement"));var r=t.data("scrollWrapper").scrollLeft();t.data("scrollWrapper").scrollLeft(r-t.data("swappedElement").outerWidth(true));t.data("getNextElementWidth",true)}},_checkContinuousSwapLeft:function(){var t=this.element,n=this.options;if(t.data("getNextElementWidth")){if(n.startAtElementId.length>0&&t.data("startAtElementHasNotPassed")){t.data("swapAt",e("#"+n.startAtElementId).outerWidth(true));t.data("startAtElementHasNotPassed",false)}else{t.data("swapAt",t.data("scrollableArea").children(":first").outerWidth(true))}t.data("getNextElementWidth",false)}if(t.data("scrollWrapper").scrollLeft()===0){t.data("swappedElement",t.data("scrollableArea").children(":last").detach());t.data("scrollableArea").prepend(t.data("swappedElement"));t.data("scrollWrapper").scrollLeft(t.data("scrollWrapper").scrollLeft()+t.data("swappedElement").outerWidth(true));t.data("getNextElementWidth",true)}},restoreOriginalElements:function(){var e=this,t=this.element;t.data("scrollableArea").html(t.data("originalElements"));e.recalculateScrollableArea();e.jumpToElement("first")},show:function(){var e=this.element;e.data("visible",true);e.show()},hide:function(){var e=this.element;e.data("visible",false);e.hide()},enable:function(){var e=this.element;e.data("scrollWrapper").kinetic("attach");e.data("enabled",true)},disable:function(){var e=this,t=this.element;t.data("scrollWrapper").kinetic("detach");t.data("enabled",false)},destroy:function(){var t=this,n=this.element;n.data("scrollableArea").remove();n.data("scrollWrapper").remove();n.html(n.data("originalElements"));e.Widget.prototype.destroy.call(this)}})})(jQuery,window,document);